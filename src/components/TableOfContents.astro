---
interface Heading {
  depth: number;
  slug: string;
  text: string;
}

interface Props {
  headings: Heading[];
}

const { headings } = Astro.props;

// Filter to depth 2-3 only (h2 and h3)
const tocHeadings = headings.filter(h => h.depth >= 2 && h.depth <= 3);
---

{tocHeadings.length > 0 && (
  <nav class="sticky top-20 w-64 hidden lg:block">
    <div class="border-l-2 border-gray-200 dark:border-gray-700 pl-4">
      <h2 class="text-sm font-bold uppercase tracking-wider text-gray-900 dark:text-white mb-4">
        On This Page
      </h2>
      <ul class="space-y-2 text-sm">
        {tocHeadings.map((heading) => (
          <li
            class:list={[
              heading.depth === 2 ? 'font-medium' : 'ml-4 font-normal',
            ]}
          >
            <a
              href={`#${heading.slug}`}
              class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors block py-1"
            >
              {heading.text}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </nav>
)}
